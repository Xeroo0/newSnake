{"version":3,"sources":["../../../../assets/script/assets/script/Game.js"],"names":["cc","Class","extends","Component","properties","overNode","Node","startBtn","tailPrefab","Prefab","scoreLabel","addTailTime","onLoad","snakeHeadNode","find","node","_children","snakeHeadNodeJs","getComponent","init","GameJs","addTime","isAddTail","tailList","Array","start","update","dt","addTail","exitGame","game","end","startGame","deleteTailList","active","reset","_components","string","gameOver","grtScore","instantiate","parent","pos","v2","Math","random","log","setPosition","color","Color","push","length","destroy","pop"],"mappings":"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","file":"Game.js","sourceRoot":"../../../../assets/script","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        overNode : cc.Node,\n        startBtn : cc.Node,\n        tailPrefab : cc.Prefab,\n        scoreLabel : cc.Node,\n        addTailTime : 2\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.snakeHeadNode = cc.find(\"snakeHeadNode\", this.node._children[0])\n        this.snakeHeadNodeJs = this.snakeHeadNode.getComponent(\"HeroControl\")\n        this.snakeHeadNodeJs.init({GameJs : this})\n        this.addTime = 0\n        this.isAddTail = false\n        this.tailList = new Array()\n    },\n\n    start () {\n\n    },\n\n    update (dt) {\n        this.addTime += dt\n        if(this.addTime >= this.addTailTime && this.isAddTail)\n        {\n            this.addTail()\n            this.addTime = 0\n        }\n    },\n\n    exitGame : function () {\n        cc.game.end()\n    },\n\n    startGame : function () {\n        this.deleteTailList()\n        this.overNode.active = false\n        this.snakeHeadNodeJs.reset()\n        this.startBtn._children[0]._components[0].string = \"再来一局\"\n        this.isAddTail = true\n    },\n\n    gameOver : function () {\n        this.overNode.active = true\n        this.scoreLabel._components[0].string = \"分数：\" + this.snakeHeadNodeJs.grtScore()\n        this.isAddTail = false\n    },\n\n    addTail : function () {\n        var node = cc.instantiate(this.tailPrefab)\n\n        node.parent = this.node._children[0]\n        let pos = cc.v2((Math.random() * 1220) - 610, (Math.random() * 660) - 330)\n        cc.log(\"Math.random : \" + Math.random() + \"POS : \" + pos)\n        node.setPosition(pos)\n        node.color = new cc.Color(Math.random() * 255, Math.random() * 255, Math.random() * 255, 255)\n        cc.log(\"color: \",node.color)\n        this.tailList.push(node)\n    },\n\n    deleteTailList : function () {\n        while (this.tailList.length) {\n            this.tailList[this.tailList.length - 1].destroy()\n            this.tailList.pop()\n        }\n    }\n});\n"]}